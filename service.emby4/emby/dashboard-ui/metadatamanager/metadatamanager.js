define(["loading","css!./metadatamanager"],function(loading){"use strict";function reload(context,itemId){loading.show(),itemId?require(["metadataEditor"],function(metadataEditor){metadataEditor.embed(context.querySelector(".editPageInnerContent"),itemId,ApiClient.serverInfo().Id)}):(context.querySelector(".editPageInnerContent").innerHTML="",loading.hide())}return function(view,params){view.addEventListener("viewshow",function(){reload(this,window.MetadataEditor.getCurrentItemId())}),window.MetadataEditor.setCurrentItemId(null),view.querySelector(".libraryTree").addEventListener("itemclicked",function(event){var data=event.detail;data.id!==window.MetadataEditor.getCurrentItemId()&&(window.MetadataEditor.setCurrentItemId(data.id),reload(view,data.id))})}});